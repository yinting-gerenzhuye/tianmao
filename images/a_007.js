(function(e){var t=e.Ali=e.Ali||{};t.ua=navigator.userAgent;t.isTmall=false;t.isTmallPad=false;t.isTaobao=false;t.isAlipay=false;t.isAlitrip=false;t.isWeb=true;t.version="2.0.3";t._noSuchApi=function(e){e&&e({errorCode:1,errorMessage:"\u63a5\u53e3\u4e0d\u5b58\u5728"})};var i=function(e,t){for(var n in t){if(e[n]===null||e[n]===undefined){e[n]=t[n]}else if(typeof t[n]==="object"){i(e[n],t[n])}}};var n=function(e,n){var a={};if(e){var r=a;e=e.split(".");for(var o=0;o<e.length-1;o+=1){r=r[e[o]]={}}r[e[o]]=n(t)}else{a=n(t)}i(t,a)};t.reg=function(e,i){if(typeof e==="function"){i=e;e=""}if(t._isInit){n(e,i)}else{t.event.add("init",function(){n(e,i)})}};t.event={_events:{},add:function(e,t){this._events[e]=this._events[e]||[];this._events[e].push(t)},remove:function(e,t){var i=this._events[e];if(!i||i.length===0){return}if(!t){this._events[e]=[];return}for(var n=i.length-1;n>=0;n-=1){if(t===i[n]){i.splice(n,1)}}},trigger:function(e){var i=this._events[e];if(!i||i.length<1){return}for(var n=0,a;a=i[n];n+=1){a(t)}}};t._getCUID=function(){var e=0;return function(){e+=1;return e}}();t.callAfterReady=function(e){var i=[].slice.call(arguments,1);t.ready(function(t){e=String(e).split(".");var n=t;for(var a=0;a<e.length-1;a+=1){n=n[e[a]];if(!n){break}}if(n&&n[e[a]]){n[e[a]].apply(n,i)}else{console.warn("Has No Api Named "+e.join("."));if(typeof i[i.length-1]==="function"){t._noSuchApi(i[i.length-1])}}})};t._config=t._config||{};var a=e._ALI_HYBRID_PLATFORM_BASEPATH||"//g.alicdn.com/hybrid/api/2.0.3/platform/";t._config.platform={alitrip:{detect:function(e){return/AliTrip\/([\d\.]+)/i.test(e)}},alipay:{detect:function(e){return/AlipayClient/.test(e)}},tmallPad:{detect:function(e){return/AliApp\(TM-PD\/([\d\.]+)\)/i.test(e)}},tmall:{detect:function(e){return/AliApp\(TM\/([\d\.]+)\)/i.test(e)||/T-UA=/i.test(e)}},taobao:{detect:function(e){return/AliApp\(TB\/([\d\.]+)\)/i.test(e)}}};var r=e._ALI_HYBRID_PLATFORM_CONFIG||{};for(var o in t._config.platform){var c=t._config.platform[o];if(r[o]){c.res=r[o].res;c.detect=r[o].detect||c.detect}if(!c.res){c.res=[a+o+"-bridge.js"]}}var u=t._store=t._store||{};var f={};u.get=function(e){return f[e]};u.set=function(e,i){if(typeof i==="undefined"){i=e;e=t._getCUID()}f[e]=i;return e};u.remove=function(e){delete f[e]};t.event.add("init",function(e){e.appinfo=e.appinfo||{};e.appinfo.name=e.appinfo.name||"web";e.appinfo.ver=e.appinfo.ver||"1.0.0";e.appinfo.engine=e.appinfo.engine||e.appinfo.name;e.appinfo.engineVer=e.appinfo.engineVer||e.appinfo.ver});t.reg("call",function(e){return function(t,i,n){e._noSuchApi(n)}});t.reg("photo",function(t){var i=function(t,i,n){i=i||{};var a=e.innerWidth;var r=e.innerHeight;i.maxWidth=i.maxWidth||a;i.maxHeight=i.maxHeight||r;var o=document.createElement("video");var c=document.createElement("canvas");o.setAttribute("width",a);o.setAttribute("height",r);o.setAttribute("autoplay","autoplay");o.style.cssText="position:absolute;"+"top:0;left:0;z-index:999;"+"width:"+a+"px;"+"height:"+r+"px;";document.body.appendChild(o);c.setAttribute("width",i.maxWidth);c.setAttribute("height",i.maxHeight);if(navigator.mozGetUserMedia){o.mozSrcObject=t}else{var u=e.URL||e.webkitURL;o.src=u.createObjectURL(t)}var f=function(e){t.stop();document.body.removeChild(o);o.onclick=null;o=null;n(e)};o.onerror=function(e){f({errorCode:3,errorMessage:e.message})};o.onclick=function(){var e,t,n,a;if(o.videoWidth/o.videoHeight>i.maxWidth/i.maxHeight){t=o.videoHeight;e=Math.ceil(t*i.maxWidth/i.maxHeight);n=Math.ceil((o.videoWidth-e)/2);a=0}else{e=o.videoWidth;t=Math.ceil(e*i.maxHeight/i.maxWidth);a=Math.ceil((o.videoHeight-t)/2);n=0}c.getContext("2d").drawImage(o,n,a,e,t,0,0,i.maxWidth,i.maxHeight);f({photo:c.toDataURL("image/"+(i.format||"png"))})}};return function(n,a){navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;if(!navigator.getMedia||!e.HTMLVideoElement||!e.HTMLCanvasElement){t._noSuchApi(a);return}navigator.getMedia({video:true,audio:false},function(e){setTimeout(function(){i(e,n,a)},1e3)},function(e){a({errorCode:3,errorMessage:e.message})})}});t.reg("pushWindow",function(){return function(t,i){if(typeof t==="string"){t={url:t}}if(t&&t.url){e.open(t.url)}i&&i({})}});t.reg("h5TradePay",function(){return function(t,i){var n=location.host.match(/waptest|wapa/i);n=n&&n[0]||"m";var a="http://d."+n+".taobao.com/goAlipay.htm?simplepay=1&needpop=1";for(var r in t){a+="&"+r+"="+encodeURIComponent(t[r])}e.open(a);i&&i({})}});t.reg(function(){return{toast:function(e,i){t._noSuchApi(i)},showTitle:t._noSuchApi,hideTitle:t._noSuchApi,showLoading:function(e,i){t._noSuchApi(i)},hideLoading:t._noSuchApi,popWindow:function(e){t._noSuchApi(e)},popTo:function(e,i){t._noSuchApi(i)},login:t._noSuchApi,tradePay:function(e,i){t._noSuchApi(i)},share:function(e,i){t._noSuchApi(i)}}});t.reg("setTitle",function(){return function(e,t){if(typeof e==="string"){e={text:e}}if(e&&e.text){document.title=e.text}t&&t({})}});t.reg("share.type",function(){return{AUTO:-1,WEIXIN:1,WEIBO:2,SMS:4,LAIWANG:8,LAIWANG_TIMELINE:16,WEIXIN_TIMELINE:32,COPY:64}});t.reg("calendar.add",function(e){return function(t,i){e._noSuchApi(i)}});t.reg("contacts.get",function(e){return function(t,i){e._noSuchApi(i)}});t.reg("network",function(e){var t=e._store;var i=function(e){var t=e!=="none";var i=e==="wifi";return{type:e,networkAvailable:t,isOnline:t,isWifi:i,is3G:false,is2G:false,isG:false,isH:false,isE:false}};var n=navigator.connection||navigator.webkitConnection||navigator.mozConnection||navigator.msConnection;return{getType:function(t){if(n&&n.type){t(i(n.type))}else{e._noSuchApi(t)}},watch:function(a){var r=0;if(n){var o=function(){a(i(n.type))};r=t.set(o);n.addEventListener("typechange",o)}else{e._noSuchApi(a)}return r},clearWatch:function(e,i){var a=t.get(e);if(n&&a){n.removeEventListener("typechange",a);t.remove(e)}i&&i({})}}});t.reg("vibration.vibrate",function(t){navigator.vibrate=navigator.vibrate||navigator.weblibkitVibrate||navigator.mozVibrate||navigator.msVibrate;if(!navigator.vibrate){if(e.Notification&&Notification.vibrate){navigator.vibrate=Notification.vibrate}else if(navigator.notification&&navigator.notification.vibrate){navigator.vibrate=navigator.notification.vibrate}}return function(e,i){var n={};if(navigator.vibrate){navigator.vibrate(e.duration||e)}else{t._noSuchApi(i)}i&&i(n)}});t.reg("geolocation",function(e){return{getCurrentPosition:function(t,i){t=t||{};t.timeout=t.timeout||1e3;if(navigator.geolocation&&navigator.geolocation.getCurrentPosition){navigator.geolocation.getCurrentPosition(function(e){if(e&&e.coords){i(e)}else{i({errorCode:3,errorMessage:"\u83b7\u53d6gps\u9519\u8bef"})}},function(e){i({errorCode:3,errorMessage:e.message})},t)}else{e._noSuchApi(i)}},watchPosition:function(t,i){t=t||{};t.timeout=t.timeout||1e3;if(navigator.geolocation&&navigator.geolocation.watchPosition){return navigator.geolocation.watchPosition(function(e){if(e&&e.coords){i(e)}else{i({errorCode:3,errorMessage:"\u83b7\u53d6gps\u9519\u8bef"})}},function(e){i({errorCode:3,errorMessage:e.message})},t)}else{e._noSuchApi(i);return 0}},clearWatch:function(t,i){var n={};if(navigator.geolocation&&navigator.geolocation.clearWatch){navigator.geolocation.clearWatch(t)}else{e._noSuchApi(i)}i&&i(n)}}});t.reg("audio",function(e){var t=e._store;return{play:function i(e,n){if(typeof e==="string"){e={url:e}}var a=document.createElement("audio");a.src=e.url;a.load();a.play();var r=t.set(a);n&&n({soundId:r});return r},stop:function(e,i){var n=t.get(e);if(n){n.pause&&n.pause();t.remove(e)}i&&i({})}}});t.reg("motion",function(t){var i=t._store;var n=.8;return{watch:function(a,r){var o=0;if(e.DeviceMotionEvent){var c=function(e){var t={acceleration:e.acceleration,accelerationIncludingGravity:e.accelerationIncludingGravity};var i=t.accelerationIncludingGravity;if(i.x===null||i.y===null||i.z===null){i=t.accelerationIncludingGravity={x:0,y:0,z:0}}if(i&&(!t.acceleration||typeof t.acceleration.x!=="number")){var a=[0,0,9.81];a[0]=n*a[0]+(1-n)*i.x;a[1]=n*a[1]+(1-n)*i.y;a[2]=n*a[2]+(1-n)*i.z;t.acceleration={x:i.x-a[0],y:i.y-a[1],z:i.z-a[2]}}r(t)};o=i.set(c);e.addEventListener("devicemotion",c)}else{t._noSuchApi(r)}return o},clearWatch:function(t,n){var a=i.get(t);if(e.DeviceMotionEvent&&a){e.removeEventListener("devicemotion",a);i.remove(t)}n&&n({})}}});t.reg("orientation",function(t){var i=t._store;return{watch:function(n,a){var r=0;if(e.DeviceOrientationEvent&&"ondeviceorientation"in e){r=i.set(function(e){var t={alpha:e.alpha||0,gamma:e.gamma||0,beta:e.beta||0,absolute:!!e.absolute};a(t)});e.addEventListener("deviceorientation",i.get(r))}else{t._noSuchApi(a)}return r},clearWatch:function(t,n){var a=i.get(t);if(e.DeviceOrientationEvent&&a){e.removeEventListener("deviceorientation",a);i.remove(t)}n&&n({})}}});t.reg("shake",function(e){var t=e._store;var i=e.motion;var n=function(e,n){e=e||{};e.sensitivity=e.sensitivity||20;e.frequency=e.frequency||150;e.callbackDelay=e.callbackDelay||3e3;var r={};var o=t.set(r);var c,u;var f=function(){if(!c){c=u}var t=Math.abs(u.x-c.x+u.y-c.y+u.z-c.z);if(t>e.sensitivity){c=null;r.timeoutId=setTimeout(f,e.callbackDelay);n&&n({})}else{r.timeoutId=setTimeout(f,e.frequency)}};var s=false;r.motionWatchId=i.watch(e,function(t){if(t.errorCode){n(t);a(o)}else{u=t.accelerationIncludingGravity;if(!s){s=true;setTimeout(f,e.frequency)}}});return o};var a=function(e,n){var a=t.get(e);if(a){i.clearWatch(a.motionWatchId);clearTimeout(a.timeoutId);t.remove(e)}n&&n({})};return{watch:n,clearWatch:a,watchByMotion:n,clearMotionWatch:a}});t.event.add("start",function(t){t._isReady=false;t._isInit=false;t.ready=function(e){if(t._isReady){e&&e(t)}else{t.event.add("ready",e)}};var i=document;var n=i.head||i.getElementsByTagName("head")[0]||i.documentElement;var a=n.getElementsByTagName("base")[0];var r;var o=function(e,t,o){var c=i.createElement("script");o=o||"utf-8";c.charset=o;var u=function(e){c.onload=c.onerror=c.onreadystatechange=null;n.removeChild(c);c=null;t(e)};if("onload"in c){c.onload=u;c.onerror=function(){u(true)}}else{c.onreadystatechange=function(){if(/loaded|complete/.test(c.readyState)){u()}}}c.src=e;r=c;a?n.insertBefore(c,a):n.appendChild(c);r=null};var c=function(e,t){var i=e.splice(0,1)[0];if(!i){t&&t()}else{o(i,function(){c(e,t)})}};var u=function(){t._isReady=true;t.event.trigger("ready")};var f=function(){t.event.trigger("init");t._isInit=true;if(t._ready){t._ready(u)}else{u()}};var s=function(){if(e._ALI_HYBRID_LOAD_SYNC){f();return}var i=t._config.platform;for(var n in i){var a=i[n];if(a.detect(t.ua)){t["is"+n.slice(0,1).toUpperCase()+n.slice(1)]=true;t.isWeb=false;c(a.res,f);return}}f()};t._loadScripts=c;s()});t.event.trigger("start");if(e.KISSY&&KISSY.add){KISSY.add("mui/hybrid",function(){return t})}else if("function"===typeof define){define(function(){return t})}})(this);(function(t){var e=t.chrome&&chrome.loadTimes;var n=t.performance;var r={config:function(t){if(!n){return}this.config=t;this.sampling=t.sampling||1e3;this.evn={id:t.id,ver:t.ver||"",nk:t.nk||"",net:"",protocol:t.protocol||(e?chrome.loadTimes().connectionInfo:""),ua:t.ua||navigator.userAgent,url:t.url||location.href,navType:function(){if(t.navType){return t.navType}if(n){return performance.navigation.type}if(e){return{LinkClicked:0,FormSubmitted:0,BackForward:2,Reload:1,FormResubmitted:0,Other:255}[chrome.loadTimes().navigationType]}return 0}()};this.formatAction=t.formatAction||this._formatAction},getStartTime:function(){if(n){return performance.timing.navigationStart}},updateNet:function(e){var n=this;if(this.config.net){this.evn.net=this.config.net;return e.apply(this)}if(t.Ali){Ali.ready(function(t){t.network.getType(function(t){n.evn.net=!t.errorCode&&t.type!=="unknown"?t.type:"";e.apply(n)})});return}var r=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(r){this.evn.net=r.type;return e.apply(this)}e.apply(this)},_formatAction:function(t,e){var n="[c"+t+"][uhttp://velocity.tmall.com]"+JSON.stringify({evn:this.evn,data:e});n=encodeURIComponent(n);var r=["type=9","id=jstracker","v=0.02","nick=","ua=","file=","line=","scrolltop=","screen=","msg="+n].join("&");return"//gm.mmstat.com/jstracker.2?"+r},hasChance:function(t){return Math.random()<1/(t||1e3)},send:function(e,n,r){r=r||this.sampling;if(!this.hasChance(r)){return}var i=arguments;this.onLoad(function(){this.updateNet(function(){var e="_velocity_img_"+Date.now();var n=new Image;t[e]=n;n.onload=n.onerror=function(){t[e]=null};n.src=this.formatAction.apply(this,i)})})},onLoad:function(e){var n=this;if(document.readyState==="complete"){e.apply(this)}else{t.addEventListener("load",function(){e.apply(n)})}},onDOMReady:function(e){var n=this;if(document.readyState==="complete"){e.apply(this)}else{t.addEventListener("DOMContentLoaded",function(){e.apply(n)})}}};r.timing=function(t){if(!n){return}var r=this;this.onLoad(function(){setTimeout(function(){var n={};var i=r.getStartTime();if(e){var o=chrome.loadTimes().firstPaintTime*1e3;if(o){n.firstPaint=o-i}}var a=performance.timing;for(var s in a){if(!a.hasOwnProperty(s)){continue}var c;if(a[s]===0){c=-1}else{c=a[s]-i;if(isNaN(c)||c<0)return}n[s]=c}r.send("timing",n,t)},0)})};r.resourceTiming=function(t,e){if(!n||!performance.getEntries){return}var r=[];var i=Object.prototype.toString.call(t);if(i==="[object Array]"){r=t}else if(i==="[object Object]"){r=[t]}else{if(!n){return}var o=arguments.callee;this.onLoad(function(){r=performance.getEntries();e=t;o.apply(this,[r,e])});return}r=function(){var t=[];for(var e=0,n=r.length;e<n;e++){var i=r[e];t.push({name:i.name,initiatorType:i.initiatorType,startTime:Math.round(i.startTime),duration:Math.round(i.duration)})}return t}();for(var a=0,s=r.length;a<s;a+=10){this.send("resourceTiming",r.slice(a,a+10),e)}return r};r.time=function(t,e){this._timeRecord||(this._timeRecord={});this._timeRecord[t]=e||Date.now()};r.timeEnd=function(t,e,r){if(!n){return}if(!this._timeRecord[t]){return}this.send("time",{name:t,startTime:this._timeRecord[t]-this.getStartTime(),duration:(e||Date.now())-this._timeRecord[t]},r);delete this._timeRecord[t]};r.timeStamp=function(t,e,r){if(!n){return}e=parseInt((e||Date.now())-this.getStartTime());this.send("timeStamp",{name:t,startTime:e},r)};r.memory=function(t){if(n&&performance.memory){this.send("memory",performance.memory,t)}};var i=function(){var e=t.requestAnimationFrame||t.webkitRequestAnimationFrame;var n=t.cancelAnimationFrame||t.webkitCancelAnimationFrame;return{_requestIDs:{},_fpsArr:{},now:function(){try{return performance.now()}catch(t){return Date.now()}},fps:function(t){if(!e){return}var n=this;var r;var i=function(){var o=n.now();if(!r){r=o;n._requestIDs[t]=e(i);return}n._fpsArr[t].push(1e3/(o-r));r=o;n._requestIDs[t]=e(i)};n._fpsArr[t]=[];n._requestIDs[t]=e(i)},fpsEnd:function(t,e){if(!n){return}n(this._requestIDs[t]);var i=this._fpsArr[t];var o=0;for(var a=0,s=i.length;a<s;a++){o+=i[a]}var c=parseInt(o/i.length);r.send("fps",{name:t,fps:c},e);delete this._fpsArr[t];delete this._requestIDs[t]}}}();r.fps=function(){i.fps.apply(i,arguments)};r.fpsEnd=function(){i.fpsEnd.apply(i,arguments)};t.Velocity=r;if(window.KISSY){KISSY.add("mui/velocity-monitor/index",function(){return r})}})(this);